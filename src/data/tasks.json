{
  "description": "Définition des tâches du jeu",
  "main_tasks": [
    {
      "id": "M1",
      "title": "Brief du boss",
      "description": "Aller voir le boss à la Direction.",
      "type": "dialogue",
      "floor": 98,
      "npc_id": "boss_reed",
      "reward_points": 1,
      "dependencies": [],
      "completion_message": "Vous avez reçu vos premières consignes.",
      "allow_unassigned_completion": true,
      "required": true,
      "priority": 100,
      "interactable_id": "boss_reed",
      "action": "talk"
    },
    {
      "id": "chat_with_alex",
      "title": "Aller voir Alex",
      "description": "Rejoindre Alex à l'open-space.",
      "type": "dialogue",
      "floor": 97,
      "npc_id": "alex",
      "reward_points": 1,
      "dependencies": ["M1"],
      "completion_message": "Vous avez parlé à Alex.",
      "allow_unassigned_completion": true,
      "required": true,
      "priority": 95,
      "interactable_id": "alex",
      "action": "talk"
    },
    {
      "id": "M3",
      "title": "Imprimante capricieuse",
      "description": "Réparer l'imprimante de l'open-space.",
      "type": "interaction",
      "floor": 97,
      "interactable_id": "printer_97",
      "reward_points": 10,
      "dependencies": ["chat_with_alex"],
      "completion_message": "L'imprimante fonctionne à nouveau.",
      "allow_unassigned_completion": true,
      "required": true,
      "priority": 90,
      "action": "interact"
    },
    {
      "id": "M4",
      "title": "Compte-rendu au boss",
      "description": "Informer le boss que l'imprimante est OK.",
      "type": "dialogue",
      "floor": 98,
      "npc_id": "boss_reed",
      "reward_points": 8,
      "dependencies": ["M3"],
      "completion_message": "Le boss est informé.",
      "allow_unassigned_completion": true,
      "required": true,
      "priority": 85,
      "interactable_id": "boss_reed",
      "action": "talk"
    }
  ],
  "side_tasks": [
    {
      "id": "water_plants",
      "title": "Prendre de l'eau",
      "description": "Remplir une bouteille au distributeur.",
      "type": "interaction",
      "floor": 97,
      "interactable_id": "water_97",
      "reward_points": 3,
      "dependencies": [],
      "completion_message": "Vous avez de l'eau.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 40,
      "tags": ["auto"],
      "action": "collect",
      "gives_flag": "has_water"
    },
    {
      "id": "S1",
      "title": "Main verte",
      "description": "Arroser la plante de l'open-space.",
      "type": "interaction",
      "floor": 97,
      "interactable_id": "plant_97",
      "reward_points": 2,
      "dependencies": ["water_plants"],
      "completion_message": "La plante paraît plus heureuse.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 35,
      "action": "interact",
      "needs_flag": "has_water"
    },
    {
      "id": "S2",
      "title": "Papiers éparpillés",
      "description": "Ramasser 3 piles de feuilles sur le plateau.",
      "type": "collection",
      "floor": 97,
      "interactable_id": "papers_97_*",
      "reward_points": 3,
      "dependencies": [],
      "completion_message": "Papiers ramassés.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 34,
      "action": "collect_multi",
      "collect_goal": 3,
      "gives_flag": "papers_collected"
    },
    {
      "id": "S3",
      "title": "Tri express",
      "description": "Déposer les papiers à la corbeille rouge.",
      "type": "interaction",
      "floor": 97,
      "interactable_id": "trash_97",
      "reward_points": 2,
      "dependencies": ["S2"],
      "completion_message": "Papiers triés.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 33,
      "action": "deliver",
      "needs_flag": "papers_collected",
      "clears_flag": "papers_collected"
    },
    {
      "id": "maya_coffee_quest",
      "title": "Un café pour Maya",
      "description": "Maya vous demande un café pour bien commencer la journée.",
      "type": "interaction",
      "floor": 97,
      "interactable_id": "coffee_97",
      "reward_points": 2,
      "dependencies": [],
      "completion_message": "Vous avez pris un café pour Maya.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 31,
      "action": "collect",
      "gives_flag": "has_coffee_for_maya"
    },
    {
      "id": "maya_give_coffee",
      "title": "Apporter le café à Maya",
      "description": "Donner le café à Maya.",
      "type": "dialogue",
      "floor": 97,
      "npc_id": "maya",
      "reward_points": 2,
      "dependencies": ["maya_coffee_quest"],
      "completion_message": "Maya a reçu son café.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 30,
      "interactable_id": "maya",
      "action": "deliver",
      "needs_flag": "has_coffee_for_maya",
      "clears_flag": "has_coffee_for_maya"
    },
    {
      "id": "break_with_maya",
      "title": "Pause avec Maya",
      "description": "Apporter le café à Maya.",
      "type": "dialogue",
      "floor": 97,
      "npc_id": "maya",
      "reward_points": 3,
      "dependencies": ["maya_give_coffee"],
      "completion_message": "Maya apprécie le café.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 31,
      "interactable_id": "maya",
      "action": "deliver",
      "needs_flag": "has_coffee",
      "clears_flag": "has_coffee"
    },
    {
      "id": "S6",
      "title": "Badge perdu",
      "description": "Rendre le badge trouvé à l'agent de sécurité.",
      "type": "interaction",
      "floor": 90,
      "interactable_id": "badge_90",
      "reward_points": 2,
      "dependencies": [],
      "completion_message": "Badge récupéré.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 30,
      "action": "collect",
      "gives_flag": "has_badge"
    },
    {
      "id": "S6b",
      "title": "Remettre le badge",
      "description": "Remettre le badge à la sécurité.",
      "type": "dialogue",
      "floor": 90,
      "npc_id": "guard",
      "reward_points": 3,
      "dependencies": ["S6"],
      "completion_message": "Badge remis.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 29,
      "interactable_id": "guard",
      "action": "deliver",
      "needs_flag": "has_badge",
      "clears_flag": "has_badge"
    },
    {
      "id": "S7",
      "title": "Salle de réunion",
      "description": "Vérifier que la salle est prête.",
      "type": "interaction",
      "floor": 98,
      "interactable_id": "meeting_98",
      "reward_points": 2,
      "dependencies": [],
      "completion_message": "Salle vérifiée.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 28,
      "action": "inspect"
    },
    {
      "id": "S8",
      "title": "Respirer un peu",
      "description": "Prendre 10 secondes à la baie vitrée.",
      "type": "interaction",
      "floor": 97,
      "interactable_id": "window_97",
      "reward_points": 1,
      "dependencies": [],
      "completion_message": "Un moment de détente.",
      "allow_unassigned_completion": true,
      "required": false,
      "priority": 27,
      "action": "linger",
      "linger_seconds": 10
    },
    {
      "id": "M5",
      "title": "Salle prête pour 9h",
      "description": "Vérifier la salle de réunion avant 9h.",
      "required": true,
      "priority": 80,
      "dependencies": ["M4"],
      "interactable_id": "meeting_98",
      "action": "inspect"
    },
    {
      "id": "S9",
      "title": "Capsules de café",
      "description": "Récupérer des capsules au placard à fournitures.",
      "required": false,
      "priority": 45,
      "tags": ["auto"],
      "interactable_id": "supply_97",
      "action": "collect",
      "gives_flag": "capsules"
    },
    {
      "id": "S10",
      "title": "Recharger la machine",
      "description": "Charger la machine à café en capsules.",
      "required": false,
      "priority": 44,
      "dependencies": ["S9"],
      "interactable_id": "coffee_97",
      "action": "deliver",
      "needs_flag": "capsules",
      "clears_flag": "capsules"
    },
    {
      "id": "S11",
      "title": "Agrafeuse vide",
      "description": "Prendre une boîte d'agrafes au placard.",
      "required": false,
      "priority": 43,
      "interactable_id": "supply_97",
      "action": "collect",
      "gives_flag": "staples_box"
    },
    {
      "id": "S12",
      "title": "Recharger l'agrafeuse",
      "description": "Recharger l'agrafeuse du bureau compta.",
      "required": false,
      "priority": 42,
      "dependencies": ["S11"],
      "interactable_id": "stapler_97",
      "action": "deliver",
      "needs_flag": "staples_box",
      "clears_flag": "staples_box"
    },
    {
      "id": "S13",
      "title": "Câbles au sol",
      "description": "Ranger les câbles qui traînent.",
      "required": false,
      "priority": 41,
      "interactable_id": "cables_97",
      "action": "interact"
    },
    {
      "id": "S14",
      "title": "Tasses orphelines",
      "description": "Ramasser 3 mugs oubliés.",
      "required": false,
      "priority": 40,
      "interactable_id": "mug_97_*",
      "action": "collect_multi",
      "collect_goal": 3,
      "gives_flag": "mugs_collected"
    },
    {
      "id": "S15",
      "title": "Laver les tasses",
      "description": "Déposer les mugs dans l'évier.",
      "required": false,
      "priority": 39,
      "dependencies": ["S14"],
      "interactable_id": "sink_97",
      "action": "deliver",
      "needs_flag": "mugs_collected",
      "clears_flag": "mugs_collected"
    },
    {
      "id": "S16",
      "title": "Tableau à nettoyer",
      "description": "Effacer le tableau blanc de la salle.",
      "required": false,
      "priority": 38,
      "interactable_id": "whiteboard_98",
      "action": "interact"
    },
    {
      "id": "S17",
      "title": "Photocopies express",
      "description": "Prendre le dossier à la reprographie.",
      "required": false,
      "priority": 37,
      "interactable_id": "copier_97",
      "action": "collect",
      "gives_flag": "copies_pack"
    },
    {
      "id": "S18",
      "title": "Livrer les copies",
      "description": "Apporter les copies au boss.",
      "required": false,
      "priority": 36,
      "dependencies": ["S17"],
      "interactable_id": "boss_reed",
      "action": "deliver",
      "needs_flag": "copies_pack",
      "clears_flag": "copies_pack"
    },
    {
      "id": "S19",
      "title": "Air frais",
      "description": "Rester quelques secondes près de la baie vitrée.",
      "required": false,
      "priority": 35,
      "interactable_id": "window_97",
      "action": "linger",
      "linger_seconds": 6
    },
    {
      "id": "S20",
      "title": "Vérif aération",
      "description": "Examiner la bouche d'aération.",
      "required": false,
      "priority": 34,
      "interactable_id": "vents_97",
      "action": "inspect"
    },
    {
      "id": "S21",
      "title": "Pause eau pour tous",
      "description": "Remplir deux gobelets au distributeur.",
      "required": false,
      "priority": 33,
      "interactable_id": "water_97",
      "action": "collect_multi",
      "collect_goal": 2,
      "gives_flag": "cups_filled"
    },
    {
      "id": "S22",
      "title": "Offrir un verre",
      "description": "Donner un verre d'eau à Maya.",
      "required": false,
      "priority": 32,
      "dependencies": ["S21"],
      "interactable_id": "maya",
      "action": "deliver",
      "needs_flag": "cups_filled"
    }
  ]
}